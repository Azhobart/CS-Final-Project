<!DOCTYPE html>

<html>
  <head>
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.cdnfonts.com/css/galactic-storm" rel="stylesheet">

  </head>
  <body class="container">
    <div id="app">
      <nav>
        <h1>Online Arcade</h1>
      </nav>
      <nav
        v-if="page != 'login' && page != 'register' && page != 'authentication'"
      >
        <h3>{{currentUser.username}}</h3>
        <button @click="setPage('home')">Games</button>
        <button @click="setPage('leaderboard')">Leaderboard</button>
        <button @click="setPage('profile')">Profile</button>
      </nav>

      <!-- log-in page (Username Field) -->
      <div id="loginField" v-if="page === 'login'">
        <div class="sectionContainer">
          <h3 class="title">Login:</h3>
          <div class="inputContainer">
            <p>Username:</p>
            <input v-model="this.user.username" />
          </div>
          <div class="inputContainer">
            <button @click="setPage('authentication'); getUserByUsername()">
              Next
            </button>
            <p>
              Don't have an account?
              <span @click="setPage('register')">Sign-up!</span>
            </p>
          </div>
        </div>
        
      </div>

      <!-- log-in page (Authentication Field) -->
      <div id="authField" v-if="page === 'authentication'">
        <div class="sectionContainer">
          <h3 class="title">Authentication:</h3>
          <div class="inputContainer">
            <p>{{this.user.authQuestion}}</p>
            <input v-model="user.authAnswer" />
          </div>
          <div class="inputContainer">
            <button @click="loginUser()">Login</button>
          </div>
        </div>
        </form>
      </div>

      <!-- register page -->
      <div id="registerField" v-show="page === 'register'">
        <div class="sectionContainer">
          <h3 class="title">Register:</h3>
          <!-- name -->
          <div class="inputContainer">
            <p>Name:</p>
            <input v-model="user.name"/>
          </div>
          <!-- username -->
          <div class="inputContainer">
            <p>Username:</p>
            <input v-model="user.username"/>
          </div>
          <!-- authentication question -->
          <div class="inputContainer">
            <p>Authentication Question:</p>
            <input v-model="user.authQuestion"/>
          </div>
          <!-- authentication answer -->
          <div class="inputContainer">
            <p>Authentication Answer:</p>
            <input v-model="user.authAnswer"/>
          </div>
          <!-- user region -->
          <div class="inputContainer">
            <p>Region:</p>
            <input v-model="user.region"/>
          </div>
          <!-- submit -->
          <div class="inputContainer">
            <button @click="setPage('login'); registerUser()">Register</button>
            <p>
              Already have an account?
              <span @click="setPage('login');">Login!</span>
            </p>
          </div>
        </div>
      </div>



      <!-- home/game page -->
      <div class="page" v-if="page === 'home'">
        <div class="sectionContainer">
          <div class="column">
            <div class="inputContainer row searchInput">
              <input placeholder="Search..." />
              <button>Search</button>
            </div>

            <div class="row" v-for="row in games">
              <div v-for="game in row">
                <div class="gameThumbnail column" @click="setPage(game.name)">
                  <div
                    v-bind:style="{backgroundImage: 'url(' + game.image + ')'}"
                  ></div>
                  <p>{{ game.name }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div v-if="page === 'profile'">
        <div class="sectionContainer">
          <h1 class="title">{{currentUser.username}}'s Profile</h1>
          <h2 class="userTitle">User Data:</h2>
          <div class="profileData">


            <p>Name:</p> <input placeholder="name" v-show="isEditing" v-model="newUser.name">
            <span v-show="!isEditing">{{ currentUser.name }}</span>

            <p>Username:</p> <input placeholder="username" v-show="isEditing" v-model="newUser.username">
            <span v-show="!isEditing">{{ currentUser.username }}</span>

            <p>Region:</p> <input placeholder="region" v-show="isEditing" v-model="newUser.region">
            <span v-show="!isEditing">{{ currentUser.region }}</span>

            <p>Authentication Question:</p> <input placeholder="question" v-show="isEditing" v-model="newUser.authQuestion">
            <span v-show="!isEditing">{{ currentUser.authQuestion }}</span>

            <p>Authentication Answer:</p> <input placeholder="answer" v-show="isEditing" v-model="newUser.authAnswer">
            <span v-show="!isEditing">{{ currentUser.authAnswer }}</span>


          </div>
          <h2 class="userTitle">Game Data:</h2>
          <div class="profileData">
            <p>Favorite Game:</p> <input placeholder="favorite game" v-show="isEditing" v-model="newUser.favoriteGame">
            <span v-show="!isEditing">{{ currentUser.favoriteGame }}</span>

            <p>Highscores:</p>
          </div>
          <div id="profileActions">
            <button @click="editProfile()">Edit</button>
            <button v-if="isEditing" @click="saveProfile()">Save</button>
            <button @click="deleteSession()">Logout</button>
          </div>

  
        </div>
      </div>


    </div>
    <script src="app.js"></script>
  </body>
</html>